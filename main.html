<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–í—Å–µ —Ç–µ—Å—Ç—ã</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div class="container">
<header class="header">
    <div style="display: flex; justify-content: center; align-items: center; position: relative;">
        <h1 style="margin: 0;">üéØ –í—Å–µ –Ω–∞—à–∏ —Ç–µ—Å—Ç—ã</h1>
        <button class="theme-toggle" id="themeToggle" style="position: absolute; right: 0;">üåô</button>
    </div>
    <p class="subtitle">–í—ã–±–µ—Ä–∏ —Ç–µ—Å—Ç –∏ —É–∑–Ω–∞–π —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –æ —Å–µ–±–µ!</p>
</header>

        <main>
<div class="tests-grid">
    <!-- –¢–µ—Å—Ç 1: –ù–∞–ø–∏—Ç–∫–∏ (–≥–æ—Ç–æ–≤) -->
    <div class="test-card drink" onclick="location.href='drink-test.html'">
        <div class="test-emoji">ü•§</div>
        <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –Ω–∞–ø–∏—Ç–æ–∫?</div>
        <div class="test-desc">–£–∑–Ω–∞–π —Å–≤–æ–π –Ω–∞–ø–∏—Ç–æ–∫ –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä—É</div>
    </div>
    
<!-- –¢–µ—Å—Ç 2: –°—É–ø–µ—Ä–≥–µ—Ä–æ–π (–≥–æ—Ç–æ–≤) -->
<div class="test-card hero" onclick="location.href='hero-test.html'">
    <div class="test-emoji">ü¶∏</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã —Å—É–ø–µ—Ä–≥–µ—Ä–æ–π?</div>
    <div class="test-desc">–£–∑–Ω–∞–π —Å–≤–æ–µ–≥–æ —Å—É–ø–µ—Ä–≥–µ—Ä–æ—è</div>
</div>
    
<!-- –¢–µ—Å—Ç 3: –ñ–∏–≤–æ—Ç–Ω–æ–µ (–≥–æ—Ç–æ–≤) -->
<div class="test-card animal" onclick="location.href='animal-test.html'">
    <div class="test-emoji">üê±</div>
    <div class="test-title">–ö–∞–∫–æ–µ —Ç—ã –∂–∏–≤–æ—Ç–Ω–æ–µ?</div>
    <div class="test-desc">–ù–∞–π–¥–∏ —Å–≤–æ–µ —Ç–æ—Ç–µ–º–Ω–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ</div>
</div>
    
<!-- –¢–µ—Å—Ç 4: –ú—É–∑—ã–∫–∞ (–≥–æ—Ç–æ–≤) -->
<div class="test-card music" onclick="location.href='music-test.html'">
    <div class="test-emoji">üéµ</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –∂–∞–Ω—Ä –º—É–∑—ã–∫–∏?</div>
    <div class="test-desc">–û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å</div>
</div>
    
<!-- –¢–µ—Å—Ç 5: –û—Ç–ø—É—Å–∫ (–≥–æ—Ç–æ–≤) -->
<div class="test-card travel" onclick="location.href='travel-test.html'">
    <div class="test-emoji">üåç</div>
    <div class="test-title">–ö—É–¥–∞ –ø–æ–µ—Ö–∞—Ç—å –≤ –æ—Ç–ø—É—Å–∫?</div>
    <div class="test-desc">–ü–æ–¥–±–µ—Ä–∏ —Å—Ç—Ä–∞–Ω—É –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</div>
</div>
    
<!-- –¢–µ—Å—Ç 6: –ü–∏—Ü—Ü–∞ (–≥–æ—Ç–æ–≤) -->
<div class="test-card pizza" onclick="location.href='pizza-test.html'">
    <div class="test-emoji">üçï</div>
    <div class="test-title">–ö–∞–∫–∞—è —Ç—ã –ø–∏—Ü—Ü–∞?</div>
    <div class="test-desc">–£–∑–Ω–∞–π, –∫–∞–∫–∞—è –ø–∏—Ü—Ü–∞ —Ç–≤–æ—è –¥—É—à–∞</div>
</div>
</div>

            <!-- –°–í–Ø–ó–¨ –° –ù–ê–ú–ò -->
<div class="contact-section">
    <h2 class="contact-title">–°–≤—è–∑—å —Å –Ω–∞–º–∏</h2>
    <p class="contact-text">–ï—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –≤–æ–ø—Ä–æ—Å—ã? –•–æ—á–µ—à—å –æ—Å—Ç–∞–≤–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –æ—Ç–∑—ã–≤?</p>
    <button class="contact-btn" onclick="location.href='contact.html'">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º</button>
</div>
        </main>
    </div>
<script>
    
// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è updateTestCounters —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
function updateTestCounters() {
    const stats = JSON.parse(localStorage.getItem('quizStats')) || {};
    const ratings = JSON.parse(localStorage.getItem('testRatings')) || {};
    
    // –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤
const tests = {
    drink: { selector: '.test-card.drink', name: '–ù–∞–ø–∏—Ç–∫–∏' },
    animal: { selector: '.test-card.animal', name: '–ñ–∏–≤–æ—Ç–Ω–æ–µ' },
    music: { selector: '.test-card.music', name: '–ú—É–∑—ã–∫–∞' },
    travel: { selector: '.test-card.travel', name: '–û—Ç–ø—É—Å–∫' },
    pizza: { selector: '.test-card.pizza', name: '–ü–∏—Ü—Ü–∞' },
    hero: { selector: '.test-card.hero', name: '–°—É–ø–µ—Ä–≥–µ—Ä–æ–π' }
};
    
    // –ù–∞—Ö–æ–¥–∏–º —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ç–µ—Å—Ç
    let mostPopularId = null;
    let maxCount = 0;
    
    for (let [id, count] of Object.entries(stats)) {
        if (count > maxCount) {
            maxCount = count;
            mostPopularId = id;
        }
    }
    
    // –£–±–∏—Ä–∞–µ–º –æ–≥–æ–Ω–µ–∫ —É –≤—Å–µ—Ö –∏ —Å—Ç–∞—Ä—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    document.querySelectorAll('.test-card').forEach(card => {
        card.classList.remove('most-popular');
        
        const oldStats = card.querySelector('.test-stats');
        if (oldStats) oldStats.remove();
    });
    
    // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ –∫–∞–∂–¥—É—é –∫–∞—Ä—Ç–æ—á–∫—É
    for (let [id, test] of Object.entries(tests)) {
        const card = document.querySelector(test.selector);
        if (card) {
            const count = stats[id] || 0;
            const testRating = ratings[id] || { average: 0, count: 0 };
            
            // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            const statsDiv = document.createElement('div');
            statsDiv.className = 'test-stats';
            
            // –°—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π
            const counterSpan = document.createElement('span');
            counterSpan.className = 'test-counter';
            counterSpan.innerHTML = `üë• ${count} ${getWord(count)}`;
            
            // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
            const separator = document.createElement('span');
            separator.className = 'stats-separator';
            separator.innerHTML = '|';
            
            // –†–µ–π—Ç–∏–Ω–≥
            const ratingSpan = document.createElement('span');
            ratingSpan.className = 'test-rating';
            
            if (testRating.count === 0) {
                ratingSpan.innerHTML = `<span class="rating-stars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</span> <span class="rating-value">0.0</span>`;
            } else {
                // –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞ (3.1 ‚Üí 3 –∑–≤–µ–∑–¥—ã, 3.6 ‚Üí 4 –∑–≤–µ–∑–¥—ã)
                const starCount = Math.round(testRating.average);
                
                // –°–æ–∑–¥–∞–µ–º –∑–≤–µ–∑–¥—ã
                let filled = '‚òÖ'.repeat(starCount);      // –ó–æ–ª–æ—Ç—ã–µ –∑–≤–µ–∑–¥—ã
                let empty = '‚òÜ'.repeat(5 - starCount);   // –ü—É—Å—Ç—ã–µ –∑–≤–µ–∑–¥—ã
                
                ratingSpan.innerHTML = `
                    <span class="rating-stars">
                        <span class="stars-filled">${filled}</span>
                        <span class="stars-empty">${empty}</span>
                    </span>
                    <span class="rating-value">${testRating.average.toFixed(1)}</span>
                `;
            }
            
            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –≤–º–µ—Å—Ç–µ
            statsDiv.appendChild(counterSpan);
            statsDiv.appendChild(separator);
            statsDiv.appendChild(ratingSpan);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
            card.appendChild(statsDiv);
            
            // –°—Ç–∞–≤–∏–º –æ–≥–æ–Ω–µ–∫ —Å–∞–º–æ–º—É –ø–æ–ø—É–ª—è—Ä–Ω–æ–º—É
            if (id === mostPopularId) {
                card.classList.add('most-popular');
            }
        }
    }
}

// –°–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–ª–æ–≤–∞ "–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ" (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ)
function getWord(count) {
    if (count % 10 === 1 && count % 100 !== 11) return '–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ';
    if ([2,3,4].includes(count % 10) && ![12,13,14].includes(count % 100)) return '–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è';
    return '–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π';
}

// ========== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –¢–ï–ú–´ ==========
(function() {
    const themeToggle = document.getElementById('themeToggle');
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
        themeToggle.textContent = '‚òÄÔ∏è';
    }
    
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
    themeToggle.addEventListener('click', function() {
        document.body.classList.toggle('dark-theme');
        
        if (document.body.classList.contains('dark-theme')) {
            themeToggle.textContent = '‚òÄÔ∏è';
            localStorage.setItem('theme', 'dark');
        } else {
            themeToggle.textContent = 'üåô';
            localStorage.setItem('theme', 'light');
        }
    });
})();

// –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏
window.updateTestCounters = updateTestCounters;

// –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', updateTestCounters);

// –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
setInterval(updateTestCounters, 5000);
</script>
<script src="test-helper.js"></script>

<script>
    (function() {
        function forceFixBorder() {
            // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
            document.querySelectorAll('.test-card.most-popular').forEach(card => {
                // –°–æ–∑–¥–∞–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –ø—Ä—è–º–æ –≤ head
                const styleId = 'popular-fix-style';
                if (!document.getElementById(styleId)) {
                    const style = document.createElement('style');
                    style.id = styleId;
                    style.innerHTML = `
                        .test-card.most-popular::before {
                            border: 2px solid #ffaa00 !important;
                            border-color: #ffaa00 !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º
                card.style.transform = 'scale(1)';
            });
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
        forceFixBorder();
        setTimeout(forceFixBorder, 500);
        setTimeout(forceFixBorder, 1000);
        setTimeout(forceFixBorder, 2000);
    })();
</script>
```
</body>
</html>