<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–í—Å–µ —Ç–µ—Å—Ç—ã</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div class="container">
<header class="header">
    <div style="display: flex; justify-content: space-between; align-items: center; position: relative;">
        <button onclick="location.href='contact.html'" class="feedback-btn">–û—Å—Ç–∞–≤—å –æ—Ç–∑—ã–≤</button>
        <h1 style="margin: 0;">üéØ –í—Å–µ –Ω–∞—à–∏ —Ç–µ—Å—Ç—ã</h1>
        <button class="theme-toggle" id="themeToggle">üåô</button>
    </div>
    <p class="subtitle">–í—ã–±–µ—Ä–∏ —Ç–µ—Å—Ç –∏ —É–∑–Ω–∞–π —á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ –æ —Å–µ–±–µ!</p>
</header>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ø–æ–∏—Å–∫ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ -->
<div class="stats-search-row">
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∞–π—Ç–∞ -->
    <div class="stats-container">
        <div class="stats-row">
            <span class="stats-item">üìä –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: <span id="total-tests">21</span></span>
            <span class="stats-separator">|</span>
            <span class="stats-item">üë• –í—Å–µ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π: <span id="total-played">0</span></span>
        </div>
    </div>

<!-- –ü–æ–∏—Å–∫ –ø–æ —Ç–µ—Å—Ç–∞–º -->
<div class="search-container">
    <div class="search-wrapper">
        <input type="text" id="search-input" class="search-input" placeholder="–ù–∞–π—Ç–∏ —Ç–µ—Å—Ç...">
        <button id="search-clear" class="search-clear" title="–û—á–∏—Å—Ç–∏—Ç—å">‚úï</button>
    </div>
</div>
</div>

        <main>
<div class="tests-grid">
    <!-- –¢–µ—Å—Ç 1: –ù–∞–ø–∏—Ç–∫–∏ (–≥–æ—Ç–æ–≤) -->
    <div class="test-card drink" onclick="location.href='drink-test.html'">
        <div class="test-emoji">ü•§</div>
        <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –Ω–∞–ø–∏—Ç–æ–∫?</div>
        <div class="test-desc">–£–∑–Ω–∞–π —Å–≤–æ–π –ª—é–±–∏–º—ã–π –≤–∫—É—Å</div>
    </div>
    
<!-- –¢–µ—Å—Ç 2: –°—É–ø–µ—Ä–≥–µ—Ä–æ–π (–≥–æ—Ç–æ–≤) -->
<div class="test-card hero" onclick="location.href='hero-test.html'">
    <div class="test-emoji">ü¶∏</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã —Å—É–ø–µ—Ä–≥–µ—Ä–æ–π?</div>
    <div class="test-desc">–†–∞—Å–∫—Ä–æ–π —Å–≤–æ—é —Å—É–ø–µ—Ä—Å–∏–ª—É</div>
</div>
    
<!-- –¢–µ—Å—Ç 3: –ñ–∏–≤–æ—Ç–Ω–æ–µ (–≥–æ—Ç–æ–≤) -->
<div class="test-card animal" onclick="location.href='animal-test.html'">
    <div class="test-emoji">üê±</div>
    <div class="test-title">–ö–∞–∫–æ–µ —Ç—ã –∂–∏–≤–æ—Ç–Ω–æ–µ?</div>
    <div class="test-desc">–ù–∞–π–¥–∏ —Å–≤–æ–µ —Ç–æ—Ç–µ–º–Ω–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ</div>
</div>
    
<!-- –¢–µ—Å—Ç 4: –ú—É–∑—ã–∫–∞ (–≥–æ—Ç–æ–≤) -->
<div class="test-card music" onclick="location.href='music-test.html'">
    <div class="test-emoji">üéµ</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –∂–∞–Ω—Ä –º—É–∑—ã–∫–∏?</div>
    <div class="test-desc">–û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å</div>
</div>
    
<!-- –¢–µ—Å—Ç 5: –û—Ç–ø—É—Å–∫ (–≥–æ—Ç–æ–≤) -->
<div class="test-card travel" onclick="location.href='travel-test.html'">
    <div class="test-emoji">üåç</div>
    <div class="test-title">–ö—É–¥–∞ –ø–æ–µ—Ö–∞—Ç—å –≤ –æ—Ç–ø—É—Å–∫?</div>
    <div class="test-desc">–ü–æ–¥–±–µ—Ä–∏ —Å—Ç—Ä–∞–Ω—É –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</div>
</div>
    
<!-- –¢–µ—Å—Ç 6: –ü–∏—Ü—Ü–∞ (–≥–æ—Ç–æ–≤) -->
<div class="test-card pizza" onclick="location.href='pizza-test.html'">
    <div class="test-emoji">üçï</div>
    <div class="test-title">–ö–∞–∫–∞—è —Ç—ã –ø–∏—Ü—Ü–∞?</div>
    <div class="test-desc">–£–∑–Ω–∞–π –∫–∞–∫–∞—è –ø–∏—Ü—Ü–∞ —Ç–≤–æ—è –¥—É—à–∞</div>
</div>

<!-- –¢–µ—Å—Ç 7: –ü—Ä–æ—Ñ–µ—Å—Å–∏—è (–≥–æ—Ç–æ–≤) -->
<div class="test-card job" onclick="location.href='job-test.html'">
    <div class="test-emoji">üíº</div>
    <div class="test-title">–ö–∞–∫–∞—è —Ç—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏—è?</div>
    <div class="test-desc">–£–∑–Ω–∞–π –∫–∞–∫–∞—è –ø—Ä–æ—Ñ–µ—Å—Å–∏—è —Ç–µ–±–µ –ø–æ–¥—Ö–æ–¥–∏—Ç</div>
</div>

<!-- –¢–µ—Å—Ç 8: –ü–ª–∞–Ω–µ—Ç–∞ (–≥–æ—Ç–æ–≤) -->
<div class="test-card planet" onclick="location.href='planet-test.html'">
    <div class="test-emoji">ü™ê</div>
    <div class="test-title">–ö–∞–∫–∞—è —Ç—ã –ø–ª–∞–Ω–µ—Ç–∞?</div>
    <div class="test-desc">–ù–∞–π–¥–∏ —Å–≤–æ—é –ø–ª–∞–Ω–µ—Ç—É</div>
</div>

<!-- –¢–µ—Å—Ç 9: –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (–≥–æ—Ç–æ–≤) -->
<div class="test-card weekday" onclick="location.href='weekday-test.html'">
    <div class="test-emoji">üìÖ</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏?</div>
    <div class="test-desc">–£–∑–Ω–∞–π –∫–∞–∫–æ–π –¥–µ–Ω—å –ø–æ—Ö–æ–∂ –Ω–∞ —Ç–µ–±—è</div>
</div>

<!-- –¢–µ—Å—Ç 10: –ñ–∞–Ω—Ä—ã –∫–∏–Ω–æ (–Ω–æ–≤—ã–π) -->
<div class="test-card genre" onclick="location.href='genre-test.html'">
    <div class="test-emoji">üé¨</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –∂–∞–Ω—Ä –∫–∏–Ω–æ?</div>
    <div class="test-desc">–ü–æ–π–º–∏ —Å–≤–æ–π –∂–∞–Ω—Ä</div>
</div>

<!-- –¢–µ—Å—Ç 11: –í—Ä–µ–¥–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ (–Ω–æ–≤—ã–π) -->
<div class="test-card habits" onclick="location.href='habits-test.html'">
    <div class="test-emoji">üòß</div>
    <div class="test-title">–ö–∞–∫–∞—è —Ç–≤–æ—è —Å–ª–∞–±–æ—Å—Ç—å?</div>
    <div class="test-desc">–£–∑–Ω–∞–π —Å–≤–æ—é –≥–ª–∞–≤–Ω—É—é –≤—Ä–µ–¥–Ω—É—é –ø—Ä–∏–≤—ã—á–∫—É</div>
</div>

<!-- –¢–µ—Å—Ç 12: –°—Ç—Ä–∞—Ö–∏/–§–æ–±–∏–∏ (–Ω–æ–≤—ã–π) -->
<div class="test-card fears" onclick="location.href='fears-test.html'">
    <div class="test-emoji">üò®</div>
    <div class="test-title">–ö–∞–∫–æ–π —É —Ç–µ–±—è —Å—Ç—Ä–∞—Ö?</div>
    <div class="test-desc">–ö–∞–∫–∞—è —Ñ–æ–±–∏—è –∂–∏–≤–µ—Ç –≤–Ω—É—Ç—Ä–∏ —Ç–µ–±—è</div>
</div>

<!-- –¢–µ—Å—Ç 13: –î–∏–Ω–æ–∑–∞–≤—Ä—ã (–Ω–æ–≤—ã–π) -->
<div class="test-card dinosaurs" onclick="location.href='dinosaurs-test.html'">
    <div class="test-emoji">ü¶ñ</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –¥–∏–Ω–æ–∑–∞–≤—Ä?</div>
    <div class="test-desc">–ù–∞–π–¥–∏ –¥–∏–Ω–æ–∑–∞–≤—Ä–∞ –≤ —Å–≤–æ–µ–π –¥—É—à–µ</div>
</div>
<!-- –¢–µ—Å—Ç 14: –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å—è (–Ω–æ–≤—ã–π) -->
<div class="test-card medieval" onclick="location.href='medieval-test.html'">
    <div class="test-emoji">üè∞</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã —Ä—ã—Ü–∞—Ä—å?</div>
    <div class="test-desc">–ù–∞–π–¥–∏ —Å–µ–±—è –≤ —ç–ø–æ—Ö–µ —Ä—ã—Ü–∞—Ä–µ–π</div>
</div>

<!-- –¢–µ—Å—Ç 15: –ü—Ä–∏—Ä–æ–¥–Ω–æ–µ —è–≤–ª–µ–Ω–∏–µ (–Ω–æ–≤—ã–π) -->
<div class="test-card nature" onclick="location.href='nature-test.html'">
    <div class="test-emoji">üå™Ô∏è</div>
    <div class="test-title">–ö–∞–∫–∞—è —Ç—ã —Å—Ç–∏—Ö–∏—è?</div>
    <div class="test-desc">–£–∑–Ω–∞–π –∫–∞–∫–∞—è —Å—Ç–∏—Ö–∏—è –∂–∏–≤–µ—Ç —É —Ç–µ–±—è –≤–Ω—É—Ç—Ä–∏</div>
</div>
<!-- –¢–µ—Å—Ç 16: –ò–≥—Ä–∞ -->
<div class="test-card game" onclick="location.href='game-test.html'">
    <div class="test-emoji">üéÆ</div>
    <div class="test-title">–ö–∞–∫–∞—è —Ç—ã –∏–≥—Ä–∞?</div>
    <div class="test-desc">–ù–∞–π–¥–∏ —Å–≤–æ–π –ª—é–±–∏–º—ã–π –∂–∞–Ω—Ä</div>
</div>

<!-- –¢–µ—Å—Ç 17: –ú–∞—à–∏–Ω–∞ -->
<div class="test-card car" onclick="location.href='car-test.html'">
    <div class="test-emoji">üèéÔ∏è</div>
    <div class="test-title">–ö–∞–∫–∞—è —Ç—ã –º–∞—à–∏–Ω–∞?</div>
    <div class="test-desc">–¢–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä</div>
</div>

<!-- –¢–µ—Å—Ç 18: –ì—Ä–µ—Ö -->
<div class="test-card sin" onclick="location.href='sin-test.html'">
    <div class="test-emoji">üòà</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –≥—Ä–µ—Ö?</div>
    <div class="test-desc">–£–∑–Ω–∞–π —Å–≤–æ–π –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ä–æ–∫</div>
</div>

<!-- –¢–µ—Å—Ç 19: –ü—Ä–∞–∑–¥–Ω–∏–∫ -->
<div class="test-card holiday" onclick="location.href='holiday-test.html'">
    <div class="test-emoji">üéâ</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã –ø—Ä–∞–∑–¥–Ω–∏–∫?</div>
    <div class="test-desc">–ù–∞–π–¥–∏ —Å–≤–æ–π –ª—É—á—à–∏–π –¥–µ–Ω—å</div>
</div>

<!-- –¢–µ—Å—Ç 20: –í–æ–∑—Ä–∞—Å—Ç –¥—É—à–∏ -->
<div class="test-card soulage" onclick="location.href='soulage-test.html'">
    <div class="test-emoji">üßø</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç–≤–æ–π –≤–æ–∑—Ä–∞—Å—Ç?</div>
    <div class="test-desc">–£–∑–Ω–∞–π —Å–∫–æ–ª—å–∫–æ –ª–µ—Ç —Ç–≤–æ–µ–π –¥—É—à–µ</div>
</div>

<!-- –¢–µ—Å—Ç 21: –°—É–ø–µ—Ä–∑–ª–æ–¥–µ–π -->
<div class="test-card supervillain" onclick="location.href='supervillain-test.html'">
    <div class="test-emoji">ü¶π</div>
    <div class="test-title">–ö–∞–∫–æ–π —Ç—ã —Å—É–ø–µ—Ä–∑–ª–æ–¥–µ–π?</div>
    <div class="test-desc">–ö–∞–∫–∞—è —Ç–≤–æ—è —Ç–µ–º–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞</div>
</div>
</div>

            <!-- –°–í–Ø–ó–¨ –° –ù–ê–ú–ò -->
<div class="contact-section">
    <h2 class="contact-title">–°–≤—è–∑—å —Å –Ω–∞–º–∏</h2>
    <p class="contact-text">–•–æ—á–µ—à—å –æ—Å—Ç–∞–≤–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –æ—Ç–∑—ã–≤? –ï—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –≤–æ–ø—Ä–æ—Å—ã?</p>
    <button class="contact-btn" onclick="location.href='contact.html'">–ù–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º</button>
</div>
        </main>
    </div>
<script>
// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è updateTestCounters - –¢–û–õ–¨–ö–û –û–ë–ù–û–í–õ–Ø–ï–¢ –î–ê–ù–ù–´–ï, –ù–ï –£–î–ê–õ–Ø–ï–¢ –°–¢–ò–õ–ò
function updateTestCounters() {
    const stats = JSON.parse(localStorage.getItem('quizStats')) || {};
    const ratings = JSON.parse(localStorage.getItem('testRatings')) || {};
    
    // –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤
    const tests = {
        drink: { selector: '.test-card.drink', name: '–ù–∞–ø–∏—Ç–∫–∏' },
        animal: { selector: '.test-card.animal', name: '–ñ–∏–≤–æ—Ç–Ω–æ–µ' },
        music: { selector: '.test-card.music', name: '–ú—É–∑—ã–∫–∞' },
        travel: { selector: '.test-card.travel', name: '–û—Ç–ø—É—Å–∫' },
        pizza: { selector: '.test-card.pizza', name: '–ü–∏—Ü—Ü–∞' },
        hero: { selector: '.test-card.hero', name: '–°—É–ø–µ—Ä–≥–µ—Ä–æ–π' },
        job: { selector: '.test-card.job', name: '–ü—Ä–æ—Ñ–µ—Å—Å–∏—è' },
        planet: { selector: '.test-card.planet', name: '–ü–ª–∞–Ω–µ—Ç–∞' },
        weekday: { selector: '.test-card.weekday', name: '–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏' },
        genre: { selector: '.test-card.genre', name: '–ñ–∞–Ω—Ä—ã –∫–∏–Ω–æ' },
        habits: { selector: '.test-card.habits', name: '–í—Ä–µ–¥–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏' },
        fears: { selector: '.test-card.fears', name: '–°—Ç—Ä–∞—Ö–∏' },
        dinosaurs: { selector: '.test-card.dinosaurs', name: '–î–∏–Ω–æ–∑–∞–≤—Ä—ã' },
        medieval: { selector: '.test-card.medieval', name: '–ü–µ—Ä—Å–æ–Ω–∞–∂ —Å—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å—è' },
        nature: { selector: '.test-card.nature', name: '–ü—Ä–∏—Ä–æ–¥–Ω–æ–µ —è–≤–ª–µ–Ω–∏–µ' },
        game: { selector: '.test-card.game', name: '–ò–≥—Ä–∞' },
        car: { selector: '.test-card.car', name: '–ú–∞—à–∏–Ω–∞' },
        sin: { selector: '.test-card.sin', name: '–ì—Ä–µ—Ö' },
        holiday: { selector: '.test-card.holiday', name: '–ü—Ä–∞–∑–¥–Ω–∏–∫' },
        soulage: { selector: '.test-card.soulage', name: '–í–æ–∑—Ä–∞—Å—Ç –¥—É—à–∏' },
        supervillain: { selector: '.test-card.supervillain', name: '–°—É–ø–µ—Ä–∑–ª–æ–¥–µ–π' }
    };
    
    // –ù–∞—Ö–æ–¥–∏–º —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Ç–µ—Å—Ç (–ø–µ—Ä–≤—ã–π –ø–æ –ø–æ—Ä—è–¥–∫—É –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö)
    let mostPopularId = null;
    let maxCount = 0;
    
    // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ —Ç–µ—Å—Ç–∞–º –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è
    for (let [id, test] of Object.entries(tests)) {
        const count = stats[id] || 0;
        
        // –ï—Å–ª–∏ count –±–æ–ª—å—à–µ maxCount –ò–õ–ò (—Ä–∞–≤–Ω–æ –∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π –≤—Å—Ç—Ä–µ—Ç–∏–≤—à–∏–π—Å—è)
        if (count > maxCount) {
            maxCount = count;
            mostPopularId = id;
        }
        // –ï—Å–ª–∏ —Ä–∞–≤–Ω—ã - –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–µ—Ä–≤–æ–≥–æ –≤—Å—Ç—Ä–µ—Ç–∏–≤—à–µ–≥–æ—Å—è (–Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º)
    }
    
    // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å most-popular —É –≤—Å–µ—Ö
    document.querySelectorAll('.test-card').forEach(card => {
        card.classList.remove('most-popular');
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
    for (let [id, test] of Object.entries(tests)) {
        const card = document.querySelector(test.selector);
        if (card) {
            const count = stats[id] || 0;
            const testRating = ratings[id] || { average: 0, count: 0 };
            
            // –ò—â–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π
            let statsDiv = card.querySelector('.test-stats');
            if (!statsDiv) {
                statsDiv = document.createElement('div');
                statsDiv.className = 'test-stats';
                card.appendChild(statsDiv);
            }
            
            // –û—á–∏—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –Ω–æ –Ω–µ —É–¥–∞–ª—è–µ–º —Å–∞–º –±–ª–æ–∫
            statsDiv.innerHTML = '';
            
            // –°—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π
            const counterSpan = document.createElement('span');
            counterSpan.className = 'test-counter';
            counterSpan.innerHTML = `üë• ${count} ${getWord(count)}`;
            
            // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
            const separator = document.createElement('span');
            separator.className = 'stats-separator';
            separator.innerHTML = '|';
            
            // –†–µ–π—Ç–∏–Ω–≥
            const ratingSpan = document.createElement('span');
            ratingSpan.className = 'test-rating';
            
            if (testRating.count === 0) {
                ratingSpan.innerHTML = `<span class="rating-stars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</span> <span class="rating-value">0.0</span>`;
            } else {
                const starCount = Math.round(testRating.average);
                let filled = '‚òÖ'.repeat(starCount);
                let empty = '‚òÜ'.repeat(5 - starCount);
                
                ratingSpan.innerHTML = `
                    <span class="rating-stars">
                        <span class="stars-filled">${filled}</span>
                        <span class="stars-empty">${empty}</span>
                    </span>
                    <span class="rating-value">${testRating.average.toFixed(1)}</span>
                `;
            }
            
            statsDiv.appendChild(counterSpan);
            statsDiv.appendChild(separator);
            statsDiv.appendChild(ratingSpan);
            
            // –°—Ç–∞–≤–∏–º –æ–≥–æ–Ω–µ–∫ —Å–∞–º–æ–º—É –ø–æ–ø—É–ª—è—Ä–Ω–æ–º—É
            if (id === mostPopularId) {
                card.classList.add('most-popular');
            }
        }
    }
}

// –°–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–ª–æ–≤–∞ "–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ"
function getWord(count) {
    if (count % 10 === 1 && count % 100 !== 11) return '–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ';
    if ([2,3,4].includes(count % 10) && ![12,13,14].includes(count % 100)) return '–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è';
    return '–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π';
}

// ========== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –¢–ï–ú–´ ==========
(function() {
    const themeToggle = document.getElementById('themeToggle');
    
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
        themeToggle.textContent = '‚òÄÔ∏è';
    }
    
    themeToggle.addEventListener('click', function() {
        document.body.classList.toggle('dark-theme');
        
        if (document.body.classList.contains('dark-theme')) {
            themeToggle.textContent = '‚òÄÔ∏è';
            localStorage.setItem('theme', 'dark');
        } else {
            themeToggle.textContent = 'üåô';
            localStorage.setItem('theme', 'light');
        }
    });
})();

window.updateTestCounters = updateTestCounters;
document.addEventListener('DOMContentLoaded', updateTestCounters);
setInterval(updateTestCounters, 5000);
</script>

<!-- –£–ë–ò–†–ê–ï–ú forceFixBorder - –û–ù –ë–û–õ–¨–®–ï –ù–ï –ù–£–ñ–ï–ù -->
<script src="test-helper.js"></script>

<script>
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤ –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
function sortTestsByPopularity() {
    const testsGrid = document.querySelector('.tests-grid');
    const testCards = Array.from(document.querySelectorAll('.test-card'));
    
    // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    const stats = JSON.parse(localStorage.getItem('quizStats')) || {};
    
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏: —Å–Ω–∞—á–∞–ª–∞ —Ç–µ, —É –∫–æ–≥–æ –±–æ–ª—å—à–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π
    testCards.sort((a, b) => {
        // –ü–æ–ª—É—á–∞–µ–º ID —Ç–µ—Å—Ç–∞ –∏–∑ –∫–ª–∞—Å—Å–∞
        const getTestId = (card) => {
            const classList = card.className.split(' ');
            for (let cls of classList) {
                if (cls !== 'test-card' && cls !== 'most-popular') {
                    return cls;
                }
            }
            return null;
        };
        
        const idA = getTestId(a);
        const idB = getTestId(b);
        
        const countA = stats[idA] || 0;
        const countB = stats[idB] || 0;
        
        // –ï—Å–ª–∏ —Ä–∞–≤–Ω—ã, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (–æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å)
        if (countB === countA) {
            return 0; // 0 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
        }
        
        return countB - countA; // –ü–æ —É–±—ã–≤–∞–Ω–∏—é
    });
    
    // –û—á–∏—â–∞–µ–º —Å–µ—Ç–∫—É –∏ –¥–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
    testsGrid.innerHTML = '';
    testCards.forEach(card => {
        testsGrid.appendChild(card);
    });
}

// –ó–∞–ø—É—Å–∫–∞–µ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    sortTestsByPopularity();
});

// –¢–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞–µ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
const originalUpdateTestCounters = window.updateTestCounters;
window.updateTestCounters = function() {
    if (originalUpdateTestCounters) originalUpdateTestCounters();
    sortTestsByPopularity();
};
</script>

<script>
// –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±–ª–∞—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≥–ª–∞–≤–Ω–æ–π
document.addEventListener('DOMContentLoaded', function() {
    if (typeof loadCloudData === 'function') {
        loadCloudData();
    }
});
</script>

<script>
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
function updateGlobalStats() {
    const stats = JSON.parse(localStorage.getItem('quizStats')) || {};
    
    // –°—á–∏—Ç–∞–µ–º –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π
    let totalPlayed = 0;
    for (let key in stats) {
        totalPlayed += stats[key];
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    const totalPlayedEl = document.getElementById('total-played');
    if (totalPlayedEl) {
        totalPlayedEl.textContent = totalPlayed;
    }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
document.addEventListener('DOMContentLoaded', updateGlobalStats);

// –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–≤
const originalUpdateCounters = window.updateTestCounters;
window.updateTestCounters = function() {
    if (originalUpdateCounters) originalUpdateCounters();
    updateGlobalStats();
};
</script>

<script>
// –ü–æ–∏—Å–∫ –ø–æ —Ç–µ—Å—Ç–∞–º —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('search-input');
    const searchClear = document.getElementById('search-clear');
    
    if (!searchInput) return;
    
    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞
    function performSearch() {
        const searchText = searchInput.value.toLowerCase().trim();
        const testCards = document.querySelectorAll('.test-card');
        let visibleCount = 0;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—á–∏—Å—Ç–∫–∏
        if (searchText.length > 0) {
            searchClear.classList.add('visible');
        } else {
            searchClear.classList.remove('visible');
        }
        
        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
        const oldNoResults = document.querySelector('.no-results');
        if (oldNoResults) oldNoResults.remove();
        
        // –§–∏–ª—å—Ç—Ä—É–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏
        testCards.forEach(card => {
            const title = card.querySelector('.test-title')?.textContent.toLowerCase() || '';
            const desc = card.querySelector('.test-desc')?.textContent.toLowerCase() || '';
            
            if (title.includes(searchText) || desc.includes(searchText) || searchText === '') {
                card.classList.remove('hidden');
                visibleCount++;
            } else {
                card.classList.add('hidden');
            }
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        if (visibleCount === 0 && searchText !== '') {
            const testsGrid = document.querySelector('.tests-grid');
            const noResults = document.createElement('div');
            noResults.className = 'no-results';
            noResults.innerHTML = `
                <span>üîç</span>
                –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ<br>
                <small style="font-size: 0.7em;">–ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å</small>
            `;
            testsGrid.appendChild(noResults);
        }
    }
    
    // –ü–æ–∏—Å–∫ –ø—Ä–∏ –≤–≤–æ–¥–µ
    searchInput.addEventListener('input', performSearch);
    
    // –û—á–∏—Å—Ç–∫–∞ –ø–æ–∏—Å–∫–∞
    searchClear.addEventListener('click', function() {
        searchInput.value = '';
        performSearch();
        searchInput.focus();
    });
    
    // –û—á–∏—Å—Ç–∫–∞ –ø–æ –∫–ª–∞–≤–∏—à–µ Escape
    searchInput.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            searchInput.value = '';
            performSearch();
        }
    });
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    performSearch();
});
</script>
</body>
</html>